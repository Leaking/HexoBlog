<!DOCTYPE html>
<!-- saved from url=(0080)https://developer.android.com/about/versions/nougat/android-7.0-changes.html#ndk -->
<html lang="zh-cn" itemscope="" itemtype="http://schema.org/Article"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script type="text/javascript" async="" src="./ndk_dlopen_files/linkid.js"></script><script async="" src="./ndk_dlopen_files/async-ads.js"></script><script async="" src="./ndk_dlopen_files/analytics.js"></script><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>





<meta name="xsrf_token" content="19R5dr2CDfYq2zik_y-GxPkZ8M_GqXOMOTljqKCCQrg6MTUxMTEwOTMwNDE0NTIxMA">

  
    <link rel="canonical" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=zh-cn">
  

  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=zh-tw" hreflang="zh-Hant">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=ru" hreflang="ru">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=vi" hreflang="vi">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=id" hreflang="id">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=ja" hreflang="ja">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=ko" hreflang="ko">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=pt-br" hreflang="pt-br">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=zh-cn" hreflang="zh-Hans">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html?hl=es-419" hreflang="es-419">
  
    <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html" hreflang="en">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=zh-tw" hreflang="zh-Hant-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=ru" hreflang="ru-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=vi" hreflang="vi-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=id" hreflang="id-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=ja" hreflang="ja-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=ko" hreflang="ko-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=pt-br" hreflang="pt-br-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=zh-cn" hreflang="zh-Hans-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html?hl=es-419" hreflang="es-419-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html" hreflang="en-cn">
  

  <link rel="alternate" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html" hreflang="x-default">




<link rel="shortcut icon" href="https://developer.android.com/_static/268f0926ba/images/android/favicon.png">

<link rel="apple-touch-icon" href="https://developer.android.com/_static/268f0926ba/images/android/touchicon-180.png">


<title>

  Android 7.0 行为变更 | Android Developers

</title>

  <meta name="description" content="Along with new features and capabilities, Android 7.0 includes a variety of system and API behavior changes. This document highlights some of the key changes that you should understand and account for in your apps. If you have previously published an …">



  <meta itemprop="dateModified" content="2017-03-23T21:49:50.513950">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="./ndk_dlopen_files/css">
<link rel="stylesheet" href="./ndk_dlopen_files/css(1)" title="roboto">
<link rel="stylesheet" href="./ndk_dlopen_files/dac-devsite.css">







<link href="./ndk_dlopen_files/default.css" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="./ndk_dlopen_files/android_3p-bundle.js" type="text/javascript"></script>
<script src="./ndk_dlopen_files/script_foot_closure_android__zh_cn.js"></script>
<script src="./ndk_dlopen_files/script_foot_android.js"></script>

<script type="text/javascript">
  var toRoot = '/';
  devsite.permissions.init({"f62218c009ec029abef196bba5aa34cf": true, "098dafe57affddc137df300142652cfd": false, "8e03e230de0bd8a6fe173fdf172e8b3f": false, "cb025a64a50094835616312f4774a53d": true, "c95bf81627eb648c2345aec06a66200a": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="./ndk_dlopen_files/docs.js" type="text/javascript"></script>


<script src="./ndk_dlopen_files/jsapi" type="text/javascript"></script><link type="text/css" href="./ndk_dlopen_files/default+en.css" rel="stylesheet"><link type="text/css" href="./ndk_dlopen_files/default(1).css" rel="stylesheet"><script type="text/javascript" src="./ndk_dlopen_files/default+en.I.js"></script><style type="text/css">
.gsc-control-cse {
font-family: Arial, sans-serif;
border-color: #ECEFF1;
background-color: #ECEFF1;
}
.gsc-control-cse .gsc-table-result {
font-family: Arial, sans-serif;
}
input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
border-color: #D9D9D9;
}
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
border-color: #2F5BB7;
background-color: #357AE8;
background-image: none;
filter: none;
}
.gsc-tabHeader.gsc-tabhInactive {
border-color: #CCCCCC;
background-color: #FFFFFF;
}
.gsc-tabHeader.gsc-tabhActive {
border-color: #CCCCCC;
border-bottom-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-tabsArea {
border-color: #CCCCCC;
}
.gsc-webResult.gsc-result,
.gsc-results .gsc-imageResult {
border-color: #ECEFF1;
background-color: #ECEFF1;
}
.gsc-webResult.gsc-result:hover,
.gsc-imageResult:hover {
border-color: #ECEFF1;
background-color: #ECEFF1;
}
.gs-webResult.gs-result a.gs-title:link,
.gs-webResult.gs-result a.gs-title:link b,
.gs-imageResult a.gs-title:link,
.gs-imageResult a.gs-title:link b {
color: #039BE5;
}
.gs-webResult.gs-result a.gs-title:visited,
.gs-webResult.gs-result a.gs-title:visited b,
.gs-imageResult a.gs-title:visited,
.gs-imageResult a.gs-title:visited b {
color: #039BE5;
}
.gs-webResult.gs-result a.gs-title:hover,
.gs-webResult.gs-result a.gs-title:hover b,
.gs-imageResult a.gs-title:hover,
.gs-imageResult a.gs-title:hover b {
color: #039BE5;
}
.gs-webResult.gs-result a.gs-title:active,
.gs-webResult.gs-result a.gs-title:active b,
.gs-imageResult a.gs-title:active,
.gs-imageResult a.gs-title:active b {
color: #039BE5;
}
.gsc-cursor-page {
color: #039BE5;
}
a.gsc-trailing-more-results:link {
color: #039BE5;
}
.gs-webResult .gs-snippet,
.gs-imageResult .gs-snippet,
.gs-fileFormatType {
color: #333333;
}
.gs-webResult div.gs-visibleUrl,
.gs-imageResult div.gs-visibleUrl {
color: #333333;
}
.gs-webResult div.gs-visibleUrl-short {
color: #333333;
}
.gs-webResult div.gs-visibleUrl-short {
display: none;
}
.gs-webResult div.gs-visibleUrl-long {
display: block;
}
.gs-promotion div.gs-visibleUrl-short {
display: none;
}
.gs-promotion div.gs-visibleUrl-long {
display: block;
}
.gsc-cursor-box {
border-color: #ECEFF1;
}
.gsc-results .gsc-cursor-box .gsc-cursor-page {
border-color: #CCCCCC;
background-color: #ECEFF1;
color: #039BE5;
}
.gsc-results .gsc-cursor-box .gsc-cursor-current-page {
border-color: #CCCCCC;
background-color: #FFFFFF;
color: #039BE5;
}
.gsc-webResult.gsc-result.gsc-promotion {
border-color: #F6F6F6;
background-color: #F6F6F6;
}
.gsc-completion-title {
color: #039BE5;
}
.gsc-completion-snippet {
color: #333333;
}
.gs-promotion a.gs-title:link,
.gs-promotion a.gs-title:link *,
.gs-promotion .gs-snippet a:link {
color: #1155CC;
}
.gs-promotion a.gs-title:visited,
.gs-promotion a.gs-title:visited *,
.gs-promotion .gs-snippet a:visited {
color: #1155CC;
}
.gs-promotion a.gs-title:hover,
.gs-promotion a.gs-title:hover *,
.gs-promotion .gs-snippet a:hover {
color: #1155CC;
}
.gs-promotion a.gs-title:active,
.gs-promotion a.gs-title:active *,
.gs-promotion .gs-snippet a:active {
color: #1155CC;
}
.gs-promotion .gs-snippet,
.gs-promotion .gs-title .gs-promotion-title-right,
.gs-promotion .gs-title .gs-promotion-title-right * {
color: #666666;
}
.gs-promotion .gs-visibleUrl,
.gs-promotion .gs-visibleUrl-short {
color: #039BE5;
}</style><style type="text/css">.gscb_a{display:inline-block;font:27px/13px arial,sans-serif}.gsst_a .gscb_a{color:#a1b9ed;cursor:pointer}.gsst_a:hover .gscb_a,.gsst_a:focus .gscb_a{color:#36c}.gsst_a{display:inline-block}.gsst_a{cursor:pointer;padding:0 4px}.gsst_a:hover{text-decoration:none!important}.gsst_b{font-size:16px;padding:0 2px;position:relative;user-select:none;-webkit-user-select:none;white-space:nowrap}.gsst_e{opacity:0.55;}.gsst_a:hover .gsst_e,.gsst_a:focus .gsst_e{opacity:0.72;}.gsst_a:active .gsst_e{opacity:1;}.gsst_f{background:white;text-align:left}.gsst_g{background-color:white;border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);margin:-1px -3px;padding:0 6px}.gsst_h{background-color:white;height:1px;margin-bottom:-1px;position:relative;top:-1px}.gsib_a{width:100%;padding:4px 6px 0}.gsib_a,.gsib_b{vertical-align:top}.gssb_c{border:0;position:absolute;z-index:989}.gssb_e{border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);cursor:default}.gssb_f{visibility:hidden;white-space:nowrap}.gssb_k{border:0;display:block;position:absolute;top:0;z-index:988}.gsdd_a{border:none!important}.gsq_a{padding:0}.gsq_a{padding:0}.gscsep_a{display:none}.gssb_a{padding:0 7px}.gssb_a,.gssb_a td{white-space:nowrap;overflow:hidden;line-height:22px}#gssb_b{font-size:11px;color:#36c;text-decoration:none}#gssb_b:hover{font-size:11px;color:#36c;text-decoration:underline}.gssb_g{text-align:center;padding:8px 0 7px;position:relative}.gssb_h{font-size:15px;height:28px;margin:0.2em;-webkit-appearance:button}.gssb_i{background:#eee}.gss_ifl{visibility:hidden;padding-left:5px}.gssb_i .gss_ifl{visibility:visible}a.gssb_j{font-size:13px;color:#36c;text-decoration:none;line-height:100%}a.gssb_j:hover{text-decoration:underline}.gssb_l{height:1px;background-color:#e5e5e5}.gssb_m{color:#000;background:#fff}.gsfe_a{border:1px solid #b9b9b9;border-top-color:#a0a0a0;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);}.gsfe_b{border:1px solid #4d90fe;outline:none;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);}.gssb_a{padding:0 9px}.gsib_a{padding-right:8px;padding-left:8px}.gsst_a{padding-top:5.5px}.gssb_e{border:0}.gssb_l{margin:5px 0}input.gsc-input::-webkit-input-placeholder{font-size:14px}input.gsc-input:-moz-placeholder{font-size:14px}input.gsc-input::-moz-placeholder{font-size:14px}input.gsc-input:-ms-input-placeholder{font-size:14px}input.gsc-input:focus::-webkit-input-placeholder{color:transparent}input.gsc-input:focus:-moz-placeholder{color:transparent}input.gsc-input:focus::-moz-placeholder{color:transparent}input.gsc-input:focus:-ms-input-placeholder{color:transparent}.gssb_c .gsc-completion-container{position:static}.gssb_c{z-index:5000}.gsc-completion-container table{background:transparent;font-size:inherit;font-family:inherit}.gssb_c > tbody > tr,.gssb_c > tbody > tr > td,.gssb_d,.gssb_d > tbody > tr,.gssb_d > tbody > tr > td,.gssb_e,.gssb_e > tbody > tr,.gssb_e > tbody > tr > td{padding:0;margin:0;border:0}.gssb_a table,.gssb_a table tr,.gssb_a table tr td{padding:0;margin:0;border:0}</style></head>

<body class="gc-documentation                                         about               about                           dac-nav-open">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;zh-cn&quot;, &quot;dimension4&quot;: &quot;Android&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;zh-cn&quot;, &quot;dimension4&quot;: &quot;Android&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "ZZ", "language": {"requested": "zh-cn", "served": "zh-cn"}, "projectName": "Android", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        
        <a class="dac-nav-toggle" data-dac-toggle-nav="" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html">
          <img class="dac-header-logo-image" src="./ndk_dlopen_files/android_logo.png" srcset="https://developer.android.com/static/images/android_logo_2x.png 2x" width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html" zh-tw-lang="設計" zh-cn-lang="设计" ru-lang="Проектирование" ko-lang="디자인" ja-lang="設計" es-lang="Diseñar">
              
              Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html" zh-tw-lang="開發" zh-cn-lang="开发" ru-lang="Разработка" ko-lang="개발" ja-lang="開発" es-lang="Desarrollar">
              
              Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html" zh-tw-lang="發佈" zh-cn-lang="分发" ru-lang="Распространение" ko-lang="배포" ja-lang="配布" es-lang="Distribuir">
              
              Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/" data-category="User" data-action="Console" data-label="Clicked">
          
          <img src="./ndk_dlopen_files/developer-console-icon.svg" width="18" height="19" alt="">Play 控制台</a>
        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="搜索">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          
          <h2 style="padding-bottom: 0px;">Most visited</h2><hr>
          <div class="resource-flow-layout cols" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"><div class="resource-flow-page"><div class="col-6of6"><a class="resource resource-card resource-card-18x2 resource-card-develop" href="https://developer.android.com/studio/index.html"><div class="card-bg" style="background-image: url(&quot;/images/cards/android-studio_2x.png&quot;);"></div><div class="card-info"><div class="section">studio</div><div class="title">Download Android Studio and SDK Tools</div><div class="description ellipsis" style="height: 20px;"><div class="text" style="height: auto;">Get the official Android IDE and developer tools to build apps for Android.</div></div></div></a></div><div class="col-6of6"><a class="resource resource-card resource-card-18x2 resource-card-android studio" href="https://developer.android.com/studio/command-line/logcat.html"><div class="card-bg" style="background-image: url(&quot;/static/images/resource-card-default-android.jpg&quot;);"></div><div class="card-info"><div class="section">android studio</div><div class="title">Logcat Command-line Tool</div><div class="description ellipsis" style="height: 20px;"><div class="text" style="height: auto;">Logcat is a command-line tool that dumps a log of system messages, including stack traces when the
device throws an error and messages that you have written from your app with the Log class.This page is about the command-line logcat tool, but you…</div></div></div></a></div><div class="col-6of6"><a class="resource resource-card resource-card-18x2 resource-card-studio" href="https://developer.android.com/studio/debug/am-logcat.html"><div class="card-bg" style="background-image: url(&quot;/images/tools/thumbnails/am-logcatmon2.png&quot;);"></div><div class="card-info"><div class="section">studio</div><div class="title">logcat Monitor</div><div class="description ellipsis" style="height: 20px;"><div class="text" style="height: auto;">Use the logcat Monitor to view system and user-defined log messages. You can filter the messages to display just the items that interest you.</div></div></div></a></div></div></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          
          <h2 style="padding-bottom: 0px;">Recently visited</h2><hr>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"><div class="resource-flow-page"><div class="col-6of6"><a class="resource resource-card resource-card-18x2 resource-card-android" href="https://developer.android.com/about/versions/nougat/android-7.0.html"><div class="card-bg" style="background-image: url(&quot;/images/cards/card-n-apis_2x.png&quot;);"></div><div class="card-info"><div class="section">versions</div><div class="title">Android 7.0 for Developers</div><div class="description ellipsis" style="height: 20px;"><div class="text" style="height: auto;">Android 7.0 Nougat introduces a variety of new features and capabilities for users and developers. This document highlights what's new for developers. Make sure check out the Android 7.0 behavior changes to learn about areas where platform changes…</div></div></div></a></div><div class="col-6of6"><a class="resource resource-card resource-card-18x2 resource-card-android" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html"><div class="card-bg" style="background-image: url(&quot;/images/cards/card-n-changes_2x.png&quot;);"></div><div class="card-info"><div class="section">versions</div><div class="title">Android 7.0 Behavior Changes</div><div class="description ellipsis" style="height: 20px;"><div class="text" style="height: auto;">Along with new features and capabilities, Android 7.0 includes a variety of system and API behavior changes. This document highlights some of the key changes that you should understand and account for in your apps. If you have previously published an …</div></div></div></a></div><div class="col-6of6"><a class="resource resource-card resource-card-18x2 resource-card-develop" href="https://developer.android.com/topic/libraries/data-binding/index.html"><div class="card-bg" style="background-image: url(&quot;/static/images/resource-card-default-android.jpg&quot;);"></div><div class="card-info"><div class="section">develop</div><div class="title">Data Binding Library</div><div class="description ellipsis" style="height: 20px;"><div class="text" style="height: auto;">The Data Binding Library enables you to write declarative layouts.</div></div></div></a></div></div></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
          <h2 style="padding-bottom: 0px;">
          
          Results for <span id="search-results-for"></span>
          </h2><hr>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="./ndk_dlopen_files/cse.js" async=""></script>
        <div id="___gcse_0"><div class="gsc-control-cse gsc-control-cse-en"><div class="gsc-control-wrapper-cse" dir="ltr" style="visibility: hidden;"><form class="gsc-search-box gsc-search-box-tools" accept-charset="utf-8" style="display: none;"><table cellspacing="0" cellpadding="0" class="gsc-search-box"><tbody><tr><td class="gsc-input"><div class="gsc-input-box" id="gsc-iw-id1"><table cellspacing="0" cellpadding="0" id="gs_id50" class="gstl_50 " style="width: 100%; padding: 0px;"><tbody><tr><td id="gs_tti50" class="gsib_a"><input autocomplete="off" type="text" size="10" class="gsc-input" name="search" title="search" id="gsc-i-id1" style="width: 100%; padding: 0px; border: none; margin: -0.0625em 0px 0px; height: 1.25em; outline: none; background: url(&quot;https://www.google.com/cse/static/images/1x/googlelogo_lightgrey_46x16dp.png&quot;) left center no-repeat rgb(255, 255, 255); text-indent: 48px;" x-webkit-speech="" x-webkit-grammar="builtin:search" lang="en" dir="ltr" spellcheck="false" placeholder="Custom Search"></td><td class="gsib_b"><div class="gsst_b" id="gs_st50" dir="ltr"><a class="gsst_a" href="javascript:void(0)" style="display: none;"><span class="gscb_a" id="gs_cb50">×</span></a></div></td></tr></tbody></table></div><input type="hidden" name="bgresponse" id="bgresponse"></td><td class="gsc-search-button"><input type="image" src="./ndk_dlopen_files/search_box_icon.png" class="gsc-search-button gsc-search-button-v2" title="search"></td><td class="gsc-clear-button"><div class="gsc-clear-button" title="clear results">&nbsp;</div></td></tr></tbody></table><table cellspacing="0" cellpadding="0" class="gsc-branding"><tbody><tr><td class="gsc-branding-user-defined"></td><td class="gsc-branding-text"><div class="gsc-branding-text">powered by</div></td><td class="gsc-branding-img"><img src="./ndk_dlopen_files/googlelogo_grey_46x15dp.png" class="gsc-branding-img" srcset="https://www.google.com/cse/static/images/2x/googlelogo_grey_46x15dp.png 2x"></td></tr></tbody></table></form><div class="gsc-results-wrapper-nooverlay"><div class="gsc-tabsAreaInvisible"><div class="gsc-tabHeader gsc-inline-block gsc-tabhActive">Custom Search</div><span class="gs-spacer"> </span></div><div class="gsc-tabsAreaInvisible"></div><div class="gsc-above-wrapper-area-invisible"><table cellspacing="0" cellpadding="0" class="gsc-above-wrapper-area-container"><tbody><tr><td class="gsc-result-info-container"><div class="gsc-result-info-invisible"></div></td><td class="gsc-orderby-container"><div class="gsc-orderby-invisible"><div class="gsc-orderby-label gsc-inline-block">Sort by:</div><div class="gsc-option-menu-container gsc-inline-block"><div class="gsc-selected-option-container gsc-inline-block"><div class="gsc-selected-option">Relevance</div><div class="gsc-option-selector"></div></div><div class="gsc-option-menu-invisible"><div class="gsc-option-menu-item gsc-option-menu-item-highlighted"><div class="gsc-option">Relevance</div></div><div class="gsc-option-menu-item"><div class="gsc-option">Date</div></div></div></div></div></td></tr></tbody></table></div><div class="gsc-adBlockInvisible"></div><div class="gsc-wrapper"><div class="gsc-adBlockInvisible"></div><div class="gsc-resultsbox-invisible"><div class="gsc-resultsRoot gsc-tabData gsc-tabdActive"><table cellspacing="0" cellpadding="0" class="gsc-resultsHeader"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">Web</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-all-results-active"><div class="gsc-result-selector gsc-one-result" title="show one result">&nbsp;</div><div class="gsc-result-selector gsc-more-results" title="show more results">&nbsp;</div><div class="gsc-result-selector gsc-all-results" title="show all results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div></div></div></div></div></div></div>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex="0" class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav=""></div>
    <div class="dac-nav-sidebar" data-swap="" data-dynamic="false" data-transition-speed="300" data-dac-nav="">
      <div data-swap-container="">
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-active" tabindex="0" data-swap-button="">
          
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">Android</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope="" itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/about/versions/oreo/index.html">Oreo</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/about/versions/oreo/android-8.0.html" es-lang="Información general de la API" es-419-lang="Información general de la API" id-lang="Android O untuk Pengembang" ja-lang="API の概要" ko-lang="API 개요" pt-br-lang="Visão geral da API" zh-cn-lang="API 概览">Android 8.0 Features and APIs</a></li><li><a href="https://developer.android.com/about/versions/oreo/android-8.0-changes.html" es-lang="Cambios en los comportamientos" es-419-lang="Cambios en los comportamientos" id-lang="Perubahan Perilaku" ja-lang="動作の変更点" ko-lang="동작 변경" pt-br-lang="Mudanças de comportamento" zh-cn-lang="行为变更">Android 8.0 Behavior Changes</a></li><li><a href="https://developer.android.com/about/versions/oreo/android-8.0-migration.html" es-lang="Migración de aplicaciones a Android 8.0" es-419-lang="Migración de aplicaciones a Android 8.0" id-lang="Melakukan Migrasi Aplikasi ke Android 8.0" ja-lang="Android 8.0 へのアプリの移行" ko-lang="앱을 Android 8.0로 마이그레이션" pt-br-lang="Como migrar aplicativos para o Android 8.0" zh-cn-lang="向 Android 8.0 迁移应用">Migrating to Android 8.0</a></li><li><a href="https://developer.android.com/about/versions/oreo/android-8.0-samples.html" es-lang="Ejemplos" es-419-lang="Ejemplos" id-lang="Contoh" ja-lang="サンプル" ko-lang="샘플" pt-br-lang="Exemplos" zh-cn-lang="示例">Android 8.0 Samples</a></li><li><a href="https://developer.android.com/about/versions/oreo/background.html" ja-lang="バックグラウンド実行制限" ko-lang="백그라운드 실행 제한" pt-br-lang="Limites da execução em segundo plano" zh-cn-lang="后台执行限制" es-lang="Límites de ejecución en segundo plano" es-419-lang="Límites de ejecución en segundo plano" id-lang="Batas Eksekusi Latar Belakang">Background Execution Limits</a></li><li><a href="https://developer.android.com/about/versions/oreo/background-location-limits.html" es-lang="Límites de ubicación en segundo plano" es-419-lang="Límites de ubicación en segundo plano" id-lang="Batas Lokasi Latar Belakang" ja-lang="バックグラウンド位置情報の制限" ko-lang="백그라운드 위치 제한" pt-br-lang="Limites da localização em segundo plano" zh-cn-lang="后台位置限制">Background Location Limits</a></li></ul></li><li class="nav-section expanded"><div class="nav-section-header"><a href="https://developer.android.com/about/versions/nougat/index.html">Nougat</a><span class="toggle-icon" tabindex="0"></span></div><ul style="display: block;"><li><a href="https://developer.android.com/about/versions/nougat/android-7.0.html" es-lang="Información general de la API" id-lang="Android N untuk Pengembang" ja-lang="API の概要" ko-lang="API 개요" pt-br-lang="Visão geral da API" ru-lang="Обзор API-интерфейсов" vi-lang="Android N cho Nhà phát triển" zh-cn-lang="API 概览" zh-tw-lang="API 總覽">Android 7.0 for Developers</a></li><li class="selected"><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html" es-lang="Cambios en los comportamientos" id-lang="Perubahan Perilaku" ja-lang="動作の変更点" ko-lang="동작 변경" pt-br-lang="Mudanças de comportamento" ru-lang="Изменения в работе" vi-lang="Các thay đổi Hành vi" zh-cn-lang="行为变更" zh-tw-lang="行為變更">Android 7.0 Behavior Changes</a></li><li><a href="https://developer.android.com/about/versions/nougat/android-7.0-samples.html" es-lang="Ejemplos" id-lang="Contoh" ja-lang="サンプル" ko-lang="샘플" pt-br-lang="Exemplos" ru-lang="Примеры" zh-cn-lang="示例" zh-tw-lang="範例">Android 7.0 Samples</a></li><li><a href="https://developer.android.com/about/versions/nougat/android-7.1.html">Android 7.1 for Developers</a></li><li><a href="https://developer.android.com/about/versions/nougat/android-7.1-samples.html">Android 7.1 Samples</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/about/versions/marshmallow/index.html">Marshmallow</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/about/versions/marshmallow/android-6.0.html">Android 6.0 APIs</a></li><li><a href="https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html">Android 6.0 Changes</a></li><li><a href="https://developer.android.com/about/versions/marshmallow/android-6.0-samples.html">Android 6.0 Samples</a></li><li><a href="https://developer.android.com/about/versions/marshmallow/android-6.0-testing.html">Android 6.0 Testing</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/about/versions/lollipop.html">Lollipop</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/about/versions/android-5.1.html">Android 5.1 APIs</a></li><li><a href="https://developer.android.com/about/versions/android-5.0.html" es-lang="API de Android 5.0" ja-lang="Android 5.0 API" ko-lang="Android 5.0 API" ru-lang="API для Android 5.0" zh-cn-lang="Android 5.0 API" zh-tw-lang="Android 5.0 API">Android 5.0 APIs</a></li><li><a href="https://developer.android.com/about/versions/android-5.0-changes.html">Android 5.0 Changes</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/about/versions/kitkat.html">KitKat</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/about/versions/android-4.4.html">Android 4.4 APIs</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/about/versions/jelly-bean.html">Jelly Bean</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/about/versions/android-4.3.html">Android 4.3 APIs</a></li><li><a href="https://developer.android.com/about/versions/android-4.2.html">Android 4.2 APIs</a></li><li><a href="https://developer.android.com/about/versions/android-4.1.html">Android 4.1 APIs</a></li></ul></li><li class="nav-section"><div class="nav-section-header empty"><a href="https://developer.android.com/about/android.html">About Android</a></div></li><li class="nav-section"><div class="nav-section-header empty"><a href="https://developer.android.com/about/dashboards/index.html">Dashboards</a></div></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left" tabindex="0">
  <li class="dac-nav-item home">
    
    <a class="dac-nav-link has-subnav" href="https://developer.android.com/index.html">首页</a>
    <i class="dac-sprite dac-nav-sub-slider dac-expand-less-black" tabindex="0"></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        
        <a class="dac-nav-link selected" href="https://developer.android.com/about/versions/o/index.html">Android</a><span class="dac-nav-link-forward" tabindex="0"><i class="dac-sprite dac-nav-forward"></i></span>
      </li>
      <li class="dac-nav-item wear">
        
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html">TV</a>
      </li>
      <li class="dac-nav-item auto">
        
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html">Auto</a>
      </li>
      
      <li class="dac-nav-item chrome-os">
        
        <a class="dac-nav-link" href="https://developer.android.com/chrome-os/index.html">Chrome OS</a>
      </li>
      
      <li class="dac-nav-item things">
        
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html" zh-tw-lang="設計" zh-cn-lang="设计" ru-lang="Проектирование" ko-lang="디자인" ja-lang="設計" es-lang="Diseñar">
      
      Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html" zh-tw-lang="開發" zh-cn-lang="开发" ru-lang="Разработка" ko-lang="개발" ja-lang="開発" es-lang="Desarrollar">
      
      Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex="0"></i>
    <ul class="dac-nav-secondary develop" style="display: none;">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html" zh-tw-lang="訓練課程" zh-cn-lang="培训" ru-lang="Курсы" ko-lang="교육" ja-lang="トレーニング" es-lang="Capacitación">
            
            培训</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="https://developer.android.com/guide/index.html" zh-tw-lang="API 指南" zh-cn-lang="API 指南" ru-lang="Руководства по API" ko-lang="API 가이드" ja-lang="API ガイド" es-lang="Guías de la API">
          
          API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html" zh-tw-lang="參考資源" zh-cn-lang="参考" ru-lang="Справочник" ko-lang="참조문서" ja-lang="リファレンス" es-lang="Referencia">
          
          参考网页</a>
      </li>
      <li class="dac-nav-item samples">
        
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html">示例</a>
      </li>
      <li class="dac-nav-item libraries">
        
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html">库</a></li>
      <li class="dac-nav-item studio">
        
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html">Android Studio</a></li>
      <li class="dac-nav-item ndk">
        
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html">Android NDK</a></li>
      <li class="dac-nav-item google">
        
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html" zh-tw-lang="發佈" zh-cn-lang="分发" ru-lang="Распространение" ko-lang="배포" ja-lang="配布" de-lang="Vertrieb" es-lang="Distribuir" es-419-lang="Distribuye" fr-lang="Distribuer" id-lang="Distribusikan" pt-br-lang="Distribuição" th-lang="จัดจำหน่าย" tr-lang="Dağıtma" vi-lang="Phân phối">
      
      Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex="0"></i>
    <ul class="dac-nav-secondary distribute" style="display: none;">
      <li class="dac-nav-item google-play">
        
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html">Play 控制台</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html" es-419-lang="Recomendaciones" fr-lang="Bonnes pratiques" id-lang="Praktik terbaik" ja-lang="おすすめの方法" ko-lang="권장사항" pt-br-lang="Práticas recomendadas" ru-lang="Рекомендации" th-lang="จัดจำหน่าย" tr-lang="En iyi uygulamalar" vi-lang="Các phương pháp hay nhất" zh-cn-lang="最佳做法" zh-tw-lang="最佳做法">
          
          Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html" de-lang="Marketing-Tools" es-419-lang="Herramientas de marketing" fr-lang="Outils marketing" id-lang="Fitur pemasaran" ja-lang="マーケティング ツール" ko-lang="마케팅 도구" pt-br-lang="Ferramentas de marketing" ru-lang="Маркетинговые инструменты" th-lang="เครื่องมือการตลาด" tr-lang="Pazarlama araçları" vi-lang="Công cụ tiếp thị" zh-cn-lang="营销工具" zh-tw-lang="行銷工具">
          
          Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs dac-has-content"><li class="dac-header-crumbs-item"><a class="dac-header-crumbs-link" href="https://developer.android.com/index.html">首页</a></li><li class="dac-header-crumbs-item"><a class="dac-header-crumbs-link" href="https://developer.android.com/about/versions/o/index.html">Android</a></li><li class="dac-header-crumbs-item"><a class="dac-header-crumbs-link" href="https://developer.android.com/about/versions/nougat/index.html">Nougat</a></li></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">Android 7.0 行为变更</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">

<h2>本文内容</h2>

<ol>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#perf">性能提升</a>
    <ol>
      <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#doze">低电耗模式</a></li>
      <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#bg-opt">后台优化</a></li>
    </ol>
  </li>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#perm">权限更改</a>
  </li>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#sharing-files">在应用间共享文件</a></li>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#accessibility">无障碍改进</a>
    <ol>
      <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#screen-zoom">屏幕缩放</a></li>
      <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#vision-settings">设置向导中的视觉设置</a></li>
    </ol>
  </li>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#ndk">NDK 应用链接至平台库</a></li>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#afw">Android for Work</a></li>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#annotations">注解保留</a></li>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#other">其他重要说明</a></li>
</ol>

<h2>API 差异</h2>
<ol>
  <li><a href="https://developer.android.com/sdk/api_diff/24/changes.html"> API 23 至 API 24</a></li>
</ol>

<h2>另请参阅</h2>
<ol>
  <li><a href="https://developer.android.com/about/versions/nougat/android-7.0.html">Android 7.0 开发者版本</a></li>
</ol>

</div>
</div>


<p>
  Android 7.0 除了提供诸多新特性和功能外，还对系统和 API 行为做出了各种变更。本文重点介绍您应该了解并在开发应用时加以考虑的一些主要变更。
</p>

<p>
  如果您之前发布过 Android 应用，请注意您的应用可能受到这些平台变化的影响。
</p>


<h2 id="perf" style="padding-bottom: 0px;">电池和内存</h2><hr>

<p>
Android 7.0 包括旨在延长设备电池寿命和减少 RAM 使用的系统行为变更。这些变更可能会影响您的应用访问系统资源，以及您的应用通过特定隐式 intent 与其他应用交互的方式。
</p>

<h3 id="doze">低电耗模式</h3>

<p>
  Android 6.0（API 级别 23）引入了低电耗模式，当用户设备未插接电源、处于静止状态且屏幕关闭时，该模式会推迟 CPU 和网络活动，从而延长电池寿命。而 Android 7.0 则通过在设备未插接电源且屏幕关闭状态下、但不一定要处于静止状态（例如用户外出时把手持式设备装在口袋里）时应用部分 CPU 和网络限制，进一步增强了低电耗模式。
</p>


<img src="./ndk_dlopen_files/doze-diagram-1.png" alt="" height="251px" id="figure1">
<p class="img-caption">
  <strong>图 1.</strong> 低电耗模式如何应用第一级系统活动限制以延长电池寿命的图示。
</p>

<p>
  当设备处于充电状态且屏幕已关闭一定时间后，设备会进入低电耗模式并应用第一部分限制：关闭应用网络访问、推迟作业和同步。如果进入低电耗模式后设备处于静止状态达到一定时间，系统则会对 <code><a href="https://developer.android.com/reference/android/os/PowerManager.WakeLock.html">PowerManager.WakeLock</a></code>、<code><a href="https://developer.android.com/reference/android/app/AlarmManager.html">AlarmManager</a></code> 闹铃、GPS 和 WLAN 扫描应用余下的低电耗模式限制。无论是应用部分还是全部低电耗模式限制，系统都会唤醒设备以提供简短的维护时间窗口，在此窗口期间，应用程序可以访问网络并执行任何被推迟的作业/同步。
</p>


<img src="./ndk_dlopen_files/doze-diagram-2.png" alt="" id="figure2">
<p class="img-caption">
  <strong>图 2.</strong> 低电耗模式如何在设备处于静止状态达到一定时间后应用第二级系统活动限制的图示。
</p>

<p>
  请注意，激活屏幕或插接设备电源时，系统将退出低电耗模式并移除这些处理限制。此项新增的行为不会影响有关使您的应用适应 Android 6.0（API 级别 23）中所推出的旧版本低电耗模式的建议和最佳做法，如<a href="https://developer.android.com/training/monitoring-device-state/doze-standby.html">对低电耗模式和应用待机模式进行针对性优化</a>中所讨论。您仍应遵循这些建议（例如使用 Google 云消息传递 (GCM) 发送和接收消息）并开始安排更新计划以适应新增的低电耗模式行为。
</p>


<h3 id="bg-opt">Project Svelte：后台优化</h3>

<p>
  Android 7.0 移除了三项隐式广播，以帮助优化内存使用和电量消耗。此项变更很有必要，因为隐式广播会在后台频繁启动已注册侦听这些广播的应用。删除这些广播可以显著提升设备性能和用户体验。
</p>

<p>
  移动设备会经历频繁的连接变更，例如在 WLAN 和移动数据之间切换时。目前，可以通过在应用清单中注册一个接收器来侦听隐式 <code><a href="https://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION">CONNECTIVITY_ACTION</a></code> 广播，让应用能够监控这些变更。由于很多应用会注册接收此广播，因此单次网络切换即会导致所有应用被唤醒并同时处理此广播。
</p>

<p>
  同理，在之前版本的 Android 中，应用可以注册接收来自其他应用（例如相机）的隐式 <code><a href="https://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_PICTURE">ACTION_NEW_PICTURE</a></code> 和 <code><a href="https://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_VIDEO">ACTION_NEW_VIDEO</a></code> 广播。当用户使用相机应用拍摄照片时，这些应用即会被唤醒以处理广播。
</p>

<p>
  为缓解这些问题，Android 7.0 应用了以下优化措施：
</p>

<ul>
  <li>面向 Android 7.0 开发的应用不会收到 <code><a href="https://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION">CONNECTIVITY_ACTION</a></code> 广播，即使它们已有清单条目来请求接受这些事件的通知。在前台运行的应用如果使用 <code><a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a></code> 请求接收通知，则仍可以在主线程中侦听 <code>CONNECTIVITY_CHANGE</code>。
  </li>

  <li>应用无法发送或接收 <code><a href="https://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_PICTURE">ACTION_NEW_PICTURE</a></code> 或 <code><a href="https://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_VIDEO">ACTION_NEW_VIDEO</a></code> 广播。此项优化会影响所有应用，而不仅仅是面向 Android 7.0 的应用。
  </li>
</ul>

<p>如果您的应用使用任何 intent，您仍需要尽快移除它们的依赖关系，以正确适配 Android 7.0 设备。Android 框架提供多个解决方案来缓解对这些隐式广播的需求。例如，<code><a href="https://developer.android.com/reference/android/app/job/JobScheduler.html">JobScheduler</a></code> API 提供了一个稳健可靠的机制来安排满足指定条件（例如连入无限流量网络）时所执行的网络操作。您甚至可以使用 <code><a href="https://developer.android.com/reference/android/app/job/JobScheduler.html">JobScheduler</a></code> 来适应内容提供程序变化。
</p>

<p>
  如需了解有关 Android N 中后台优化以及如何改写应用的详细信息，请参阅<a href="https://developer.android.com/preview/features/background-optimization.html">后台优化</a>。
</p>

<h2 id="perm" style="padding-bottom: 0px;">权限更改</h2><hr>

<p>
  Android 7.0 做了一些权限更改，这些更改可能会影响您的应用。
</p>

<h3 id="permfilesys">系统权限更改</h3>

<p>
  为了提高私有文件的安全性，面向 Android 7.0 或更高版本的应用私有目录被限制访问　(<code>0700</code>)。此设置可防止私有文件的元数据泄漏，如它们的大小或存在性。此权限更改有多重副作用：
</p>

<ul>
  <li>
    私有文件的文件权限不应再由所有者放宽，为使用 <code><a href="https://developer.android.com/reference/android/content/Context.html#MODE_WORLD_READABLE">MODE_WORLD_READABLE</a></code> 和/或 <code><a href="https://developer.android.com/reference/android/content/Context.html#MODE_WORLD_WRITEABLE">MODE_WORLD_WRITEABLE</a></code> 而进行的此类尝试将触发 <code><a href="https://developer.android.com/reference/java/lang/SecurityException.html">SecurityException</a></code>。 <p class="note">
      <strong>注</strong>：迄今为止，这种限制尚不能完全执行。应用仍可能使用原生 API 或 <code><a href="https://developer.android.com/reference/java/io/File.html">File</a></code> API 来修改它们的私有目录权限。但是，我们强烈反对放宽私有目录的权限。
    </p>
  </li>
  <li>
    传递软件包网域外的 <code>file://</code> URI 可能给接收器留下无法访问的路径。因此，尝试传递 <code>file://</code> URI 会触发 <code>FileUriExposedException</code>。分享私有文件内容的推荐方法是使用 <code><a href="https://developer.android.com/reference/android/support/v4/content/FileProvider.html">FileProvider</a></code>。
  </li>
  <li>
    <code><a href="https://developer.android.com/reference/android/app/DownloadManager.html">DownloadManager</a></code> 不再按文件名分享私人存储的文件。旧版应用在访问 <code><a href="https://developer.android.com/reference/android/app/DownloadManager.html#COLUMN_LOCAL_FILENAME">COLUMN_LOCAL_FILENAME</a></code> 时可能出现无法访问的路径。面向 Android 7.0 或更高版本的应用在尝试访问 <code><a href="https://developer.android.com/reference/android/app/DownloadManager.html#COLUMN_LOCAL_FILENAME">COLUMN_LOCAL_FILENAME</a></code> 时会触发 <code><a href="https://developer.android.com/reference/java/lang/SecurityException.html">SecurityException</a></code>。通过使用 <code><a href="https://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationInExternalFilesDir(android.content.Context, java.lang.String, java.lang.String)">DownloadManager.Request.setDestinationInExternalFilesDir()</a></code> 或 <code><a href="https://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationInExternalPublicDir(java.lang.String, java.lang.String)">DownloadManager.Request.setDestinationInExternalPublicDir()</a></code> 将下载位置设置为公共位置的旧版应用仍可以访问 <code><a href="https://developer.android.com/reference/android/app/DownloadManager.html#COLUMN_LOCAL_FILENAME">COLUMN_LOCAL_FILENAME</a></code> 中的路径，但是我们强烈反对使用这种方法。对于由 <code><a href="https://developer.android.com/reference/android/app/DownloadManager.html">DownloadManager</a></code> 公开的文件，首选的访问方式是使用<code><a href="https://developer.android.com/reference/android/content/ContentResolver.html#openFileDescriptor(android.net.Uri, java.lang.String)">ContentResolver.openFileDescriptor()</a></code>。
  </li>
</ul>

<h2 id="sharing-files" style="padding-bottom: 0px;">在应用间共享文件</h2><hr>

<p>
对于面向 Android 7.0 的应用，Android 框架执行的 <code><a href="https://developer.android.com/reference/android/os/StrictMode.html">StrictMode</a></code> API 政策禁止在您的应用外部公开 <code>file://</code> URI。如果一项包含文件 URI 的 intent 离开您的应用，则应用出现故障，并出现 <code>FileUriExposedException</code> 异常。
</p>

<p>
要在应用间共享文件，您应发送一项 <code>content://</code> URI，并授予 URI 临时访问权限。进行此授权的最简单方式是使用 <code><a href="https://developer.android.com/reference/android/support/v4/content/FileProvider.html">FileProvider</a></code> 类。如需了解有关权限和共享文件的详细信息，请参阅<a href="https://developer.android.com/training/secure-file-sharing/index.html">共享文件</a>。
</p>

<h2 id="accessibility" style="padding-bottom: 0px;">无障碍改进</h2><hr>

<p>
  为提高平台对于视力不佳或视力受损用户的易用性，Android 7.0 做出了一些更改。这些更改一般并不要求更改您的应用代码，不过您应仔细检查并使用您的应用测试这些功能，以评估它们对用户体验的潜在影响。
</p>


<h3 id="screen-zoom">屏幕缩放</h3>

<p>
  Android 7.0 支持用户设置<strong>显示尺寸</strong>，以放大或缩小屏幕上的所有元素，从而提升设备对视力不佳用户的可访问性。用户无法将屏幕缩放至低于最小屏幕宽度 <a href="http://developer.android.com/guide/topics/resources/providing-resources.html">sw320dp</a>，该宽度是 Nexus 4 的宽度，也是常规中等大小手机的宽度。
</p>

<div class="cols">

<div class="col-6">
  <img src="./ndk_dlopen_files/screen-zoom-1.png" alt="" height="XXX" id="figure1">
</div>
<div class="col-6">
  <img src="./ndk_dlopen_files/screen-zoom-2.png" alt="" height="XXX" id="figure1">
</div>

</div> <!-- end cols -->
<p class="img-caption">
  <strong>图 3.</strong> 右侧屏幕显示的是一台运行 Android 7.0 系统映像的设备增大显示尺寸后的效果。
</p>


<p>
  当设备密度发生更改时，系统会以如下方式通知正在运行的应用：
</p>

<ul>
  <li>如果是面向 API 级别 23 或更低版本系统的应用，系统会自动终止其所有后台进程。这意味着如果用户切换离开此类应用，转而打开 <em>Settings</em> 屏幕并更改 <strong>Display size</strong> 设置，则系统会像处理内存不足的情况一样终止该应用。如果应用具有任何前台进程，则系统会如<a href="https://developer.android.com/guide/topics/resources/runtime-changes.html">处理运行时更改</a>中所述将配置变更通知给这些进程，就像对待设备屏幕方向变更一样。
  </li>

  <li>如果是面向 Android 7.0 的应用，则其所有进程（前台和后台）都会收到有关配置变更的通知，如<a href="https://developer.android.com/guide/topics/resources/runtime-changes.html">处理运行时更改</a>中所述。
  </li>
</ul>

<p>
  大多数应用并不需要进行任何更改即可支持此功能，不过前提是这些应用遵循 Android 最佳做法。具体要检查的事项：
</p>

<ul>
  <li>在屏幕宽度为 <code><a href="https://developer.android.com/guide/topics/resources/providing-resources.html">sw320dp</a></code> 的设备上测试您的应用，并确保其充分运行。
  </li>

  <li>当设备配置发生变更时，更新任何与密度相关的缓存信息，例如缓存位图或从网络加载的资源。当应用从暂停状态恢复运行时，检查配置变更。 <p class="note">
      <strong>注</strong>：如果您要缓存与配置相关的数据，则最好也包括相关元数据，例如该数据对应的屏幕尺寸或像素密度。保存这些元数据便于您在配置变更后决定是否需要刷新缓存数据。
    </p>
  </li>

  <li>避免用像素单位指定尺寸，因为像素不会随屏幕密度缩放。应改为使用<a href="https://developer.android.com/guide/practices/screens_support.html">与密度无关像素</a> (<code>dp</code>) 单位指定尺寸。
  </li>
</ul>

<h3 id="vision-settings">设置向导中的视觉设置</h3>

<p>
  Android 7.0 在“Welcome”屏幕中加入了“Vision Settings”，用户可以在新设备上设置以下无障碍功能设置：<strong>Magnification gesture</strong>、<strong>Font size</strong>、<strong>Display size</strong> 和<strong>话语提示</strong>。此项变更让您可以更容易发现与不同屏幕设置有关的错误。要评估此功能的影响，您应在启用这些设置的状态下测试应用。您可以在 <strong>Settings &gt; Accessibility</strong> 中找到这些设置。
</p>

<h2 id="ndk" style="padding-bottom: 0px;">NDK 应用链接至平台库</h2><hr>

<p>
  从 Android 7.0 开始，系统将阻止应用动态链接非公开 NDK 库，这种库可能会导致您的应用崩溃。此行为变更旨在为跨平台更新和不同设备提供统一的应用体验。即使您的代码可能不会链接私有库，但您的应用中的第三方静态库可能会这么做。因此，所有开发者都应进行相应检查，确保他们的应用不会在运行 Android 7.0 的设备上崩溃。如果您的应用使用原生代码，则只能使用<a href="https://developer.android.com/ndk/guides/stable_apis.html">公开 NDK API</a>。
</p>

<p>
  您的应用可通过以下三种方式尝试访问私有平台 API：
</p>

<ul>
  <li>您的应用直接访问私有平台库。您应更新您的应用以添加该应用的库副本，或使用<a href="https://developer.android.com/ndk/guides/stable_apis.html">公开 NDK API</a>。
  </li>

  <li>您的应用使用一个可访问私有平台库的第三方库。即使您确定您的应用不会直接访问私有库，您仍应针对此情景测试您的应用。
  </li>

  <li>您的应用引用一个其 APK 中未包含的库。例如，如果您尝试使用您自己的 OpenSSL 副本，但忘记将它与应用的 APK 进行捆绑，则可能会出现此情况。正常情况下，此应用可在包含 <code>libcrypto.so</code> 的 Android 平台版本上运行。不过，此应用在不包含此库的新版 Android（例如，Android 6.0 和更高的版本）上会崩溃。为修复此问题，请确保您的 APK 捆绑您的所有非 NDK 库。
  </li>
</ul>

<p>
  应用不应使用 NDK 中未包含的原生库，因为这些库可能会发生更改或在不同 Android 版本之间的可用性不同。例如，从 OpenSSL 切换至 BoringSSL 即属于此类更改。此外，由于不属于 NDK 中的平台库没有兼容性要求，因此不同的设备可能提供不同级别的兼容性。
</p>

<p>
  为降低此限制可能对当前发布的应用的影响，面向 API 级别 23 或更低级别的应用在 Android N 上可暂时访问颇为常用的一组库，例如 <code>libandroid_runtime.so</code>、<code>libcutils.so</code>、<code>libcrypto.so</code> 和 <code>libssl.so</code>。如果您的应用加载其中某个库，logcat 会生成一个警告，并在目标设备上显示一个 Toast 来通知您。如果您看到这些警告，您应更新您的应用以添加该应用自己的库副本，或仅使用公开 NDK API。将来发布的 Android 平台可能会完全限制对私有库的使用，并导致您的应用崩溃。
</p>

<p>
  所有应用在调用既非公开又不可暂时访问的 API 时都会生成一个运行时错误。结果就是 <code>System.loadLibrary</code> 和 <code>dlopen(3)</code> 同时返回 <code>NULL</code>，并可能导致您的应用崩溃。您应检查应用代码以移除对私有平台 API 的使用，并使用预览版设备或模拟器全面测试应用。如果您不确定您的应用是否使用私有库，您可以<a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#ndk-errors">检查 logcat</a> 以识别运行时错误。
</p>

<p>
  下表描述的是根据应用使用的私有原生库及其目标 API 级别 (<code>android:targetSdkVersion</code>)，应用预期显示的行为。
</p>

<table id="ndk-table">
  <colgroup><col width="15%">
  <col width="15%">
  <col width="15%">
  <col width="20%">
  <col width="20%">
  <col width="20%">
  </colgroup><tbody><tr>
    <th scope="col">
      库
    </th>
    <th scope="col">
      目标 API 级别
    </th>
    <th scope="col">
      通过动态链接器进行运行时访问
    </th>
    <th scope="col">
      N Developer Preview 行为
    </th>
    <th scope="col">
      最终 Android N 版本行为
    </th>
    <th scope="col">
      未来的 Android 平台行为
    </th>
  </tr>

<tr>
  <td>
    公开 NDK
  </td>

  <td>
    任意
  </td>

  <td style="background-color:#DCEDC8">
    可访问
  </td>

  <td style="background-color:#DCEDC8">
    合乎预期
  </td>

  <td style="background-color:#DCEDC8">
    合乎预期
  </td>

  <td style="background-color:#DCEDC8">
    合乎预期
  </td>
</tr>

<tr>
  <td>
    私有（暂时可访问的私有库）
  </td>

  <td>
    23 或更低
  </td>

  <td style="background-color:#FFF9C4">
    暂时可访问
  </td>

  <td style="background-color:#FFF9C4">
      合乎预期，但您会在目标设备上收到一个 logcat 警告和一条消息。
  </td>

  <td style="background-color:#FFF9C4">
    合乎预期，但您会收到一个 logcat 警告。
  </td>

  <td style="background-color:#ffcdd2">
    运行时错误
  </td>
</tr>

<tr>
  <td>
    私有（暂时可访问的私有库）
  </td>

  <td>
    24 或更高
  </td>

  <td style="background-color:#ffcdd2">
    受限
  </td>

  <td style="background-color:#ffcdd2">
    运行时错误
  </td>

  <td style="background-color:#ffcdd2">
    运行时错误
  </td>

  <td style="background-color:#ffcdd2">
    运行时错误
  </td>
</tr>

<tr>
  <td>
    私有（其他）
  </td>

  <td>
    任意
  </td>

  <td style="background-color:#ffcdd2">
    受限
  </td>

  <td style="background-color:#ffcdd2">
    运行时错误
  </td>

  <td style="background-color:#ffcdd2">
    运行时错误
  </td>

  <td style="background-color:#ffcdd2">
    运行时错误
  </td>
</tr>
</tbody></table>

<h3 id="ndk-errors">
  检查您的应用是否使用私有库
</h3>

<p>
  为帮助您识别加载私有库的问题，logcat 可能会生成一个警告或运行时错误。例如，如果您的应用面向 API 级别 23 或更低级别，并在运行 Android 7.0 的设备上尝试访问私有库，您可能会看到一个类似于下面所示的警告：
</p>

<pre class="no-pretty-print">03-21 17:07:51.502 31234 31234 W linker  : library "libandroid_runtime.so"
("/system/lib/libandroid_runtime.so") needed or dlopened by
"/data/app/com.popular-app.android-2/lib/arm/libapplib.so" is not accessible
for the namespace "classloader-namespace" - the access is temporarily granted
as a workaround for http://b/26394120
</pre>

<p>
  这些 logcat 警告通知您哪个库正在尝试访问私有平台 API，但不会导致您的应用崩溃。但是，如果应用面向 API 级别 24 或更高级别，logcat 会生成以下运行时错误，您的应用可能会崩溃：
</p>

<pre class="no-pretty-print">java.lang.UnsatisfiedLinkError: dlopen failed: library "libcutils.so"
("/system/lib/libcutils.so") needed or dlopened by
"/system/lib/libnativeloader.so" is not accessible for the namespace
"classloader-namespace"
  at java.lang.Runtime.loadLibrary0(Runtime.java:977)
  at java.lang.System.loadLibrary(System.java:1602)
</pre>

<p>
  如果您的应用使用动态链接到私有平台 API 的第三方库，您可能也会看到上述 logcat 输出。利用 Android 7.0DK 中的 readelf 工具，您可以通过运行以下命令生成给定 <code>.so</code> 文件的所有动态链接的共享库列表：
</p>

<pre class="no-pretty-print">aarch64-linux-android-readelf -dW libMyLibrary.so
</pre>

<h3 id="ndk-update">
  更新您的应用
</h3>

<p>
  通过下面的一些步骤，您可以修复上述类型的错误并确保您的应用不会在将来的更新版平台上崩溃：
</p>

<ul>
  <li>
    如果您的应用使用私有平台库，您应更新它，以添加该应用自己的库副本或使用<a href="https://developer.android.com/ndk/guides/stable_apis.html">公开 NDK API</a>。
  </li>

  <li>
    如果您的应用使用访问私有符号的第三方库，则联系库作者以更新库。
  </li>

  <li>
    请确保将您的所有非 NDK 库与您的 APK 打包在一起。
  </li>

  <li>使用标准 JNI 函数而非来自 <code>libandroid_runtime.so</code> 的 <code>getJavaVM</code> 和 <code>getJNIEnv</code>： <pre class="no-pretty-print">AndroidRuntime::getJavaVM -&gt; GetJavaVM from &lt;jni.h&gt;
AndroidRuntime::getJNIEnv -&gt; JavaVM::GetEnv or
JavaVM::AttachCurrentThread from &lt;jni.h&gt;.
</pre>
  </li>

  <li>使用 <code>__system_property_get</code> 而非来自 <code>libcutils.so</code> 的私有 <code>property_get</code> 符号。为此，请使用 <code>__system_property_get</code> 及以下 include 函数： <pre class="prettyprint"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;sys/system_properties.h&gt;</span></pre>
    <p class="note">
      <strong>注</strong>：系统属性的可用性和内容未通过 CTS 进行测试。应执行进一步修复以避免同时使用这些属性。
    </p>
  </li>

  <li>使用来自 <code>libcrypto.so</code> 的 <code>SSL_ctrl</code> 符号的本地版本。例如，您应在您的 <code>.so</code> 文件中静态链接 <code>libcyrpto.a</code>，或从 BoringSSL/OpenSSL 添加一个动态链接的 <code>libcrypto.so</code> 版本，并将其打包到您的 APK 中。
  </li>
</ul>

<h2 id="afw" style="padding-bottom: 0px;">Android for Work</h2><hr>
<p>
  Android 7.0 包含一些针对面向 Android for Work 的应用的变更，包括对证书安装、密码重置、二级用户管理、设备标识符访问权限的变更。如果您是要针对 Android for Work 环境开发应用，则应仔细检查这些变更并相应地修改您的应用。
</p>

<ul>
  <li>您必须先安装授权证书安装程序，然后 DPC 才能对其进行设置。对于面向 N SDK 的配置文件和设备所有者应用，您应在设备规范控制器 (DPC) 调用 <code>DevicePolicyManager.setCertInstallerPackage()</code> 之前安装授权证书安装程序。如果尚未安装此安装程序，则系统会引发 <code>IllegalArgumentException</code>。
  </li>

  <li>针对设备管理员的重置密码限制现在也适用于配置文件所有者。设备管理员无法再使用 <code>DevicePolicyManager.resetPassword()</code> 来清除或更改已经设置的密码。设备管理员仍可以设置密码，但只能在设备没有密码、PIN 码或图案时这样做。
  </li>

  <li>即使设置了限制，设备所有者和配置文件所有者仍可以管理帐户。而且，即使具有 <code>DISALLOW_MODIFY_ACCOUNTS</code> 用户限制，设备所有者和配置文件所有者仍可调用 Account Management API。
  </li>

  <li>设备所有者可以更轻松地管理二级用户。当设备在设备所有者模式下运行时，系统将自动设置 <code>DISALLOW_ADD_USER</code> 限制。这样可以防止用户创建非托管二级用户。此外，<code>CreateUser()</code> 和 <code>createAndInitializeUser()</code> 方法已弃用，取而代之的是 <code>DevicePolicyManager.createAndManageUser()</code> 方法。
  </li>

  <li>设备所有者可以访问设备标识符。设备所有者可以使用 <code>DevicePolicyManagewr.getWifiMacAddress()</code> 访问设备的 WLAN MAC 地址。如果设备上从未启用 WLAN，则此方法将返回一个 <code>null</code> 值。
  </li>

  <li>工作模式设置控制工作应用访问。当工作模式关闭时，系统启动器通过使工作应用显示为灰色来指示它们不可用。启用工作模式会再次恢复正常行为。</li>

  <li>从 Settings UI 安装包含客户端证书链和对应的私钥的 PKCS #12 文件时，系统不再将该证书链中的 CA 证书安装到受信任的凭据存储空间。当应用稍后尝试检索客户端证书链时，这不会影响 <code><a href="https://developer.android.com/reference/android/security/KeyChain.html#getCertificateChain(android.content.Context, java.lang.String)">KeyChain.getCertificateChain()</a></code> 的结果。如果需要，使用 .crt 或 .cer 文件扩展名的 DER 编码格式通过 Settings UI 单独将 CA 证书安装到受信任的凭据存储空间。
  </li>

  <li>从 Android 7.0 开始，可针对每个用户管理指纹登记和存储空间。如果配置文件所有者的设备规范客户端 (DPC) 面向 Android N 设备上的 Android N 之前的版本，则用户仍可以在该设备上设置指纹，但工作应用不能访问设备指纹。当 DPC 面向 Android N 和更高版本时，用户可以通过转到 <strong>Settings &gt; Security &gt; Work profile security</strong> 专门为托管配置文件设置指纹。
  </li>

  <li><code>DevicePolicyManager.getStorageEncryptionStatus()</code> 返回新的加密状态 <code>ENCRYPTION_STATUS_ACTIVE_PER_USER</code>，以表明加密处于活动状态，且加密密钥与用户关联。仅当 DPC 面向 API 级别 24 和更高级别时才会返回新的状态。对于面向更早的 API 级别的应用，即使加密密钥是用户或配置文件特有的，系统也会返回 <code>ENCRYPTION_STATUS_ACTIVE</code>。
  </li>

  <li>在 Android 7.0 中，如果设备通过单独的工作挑战安装了托管配置文件，则原本通常会影响整个设备的多个方法将会改变其行为方式。这些方法将仅应用于托管配置文件，而不是影响整个设备。（此类方法的完整列表位于 <code><a href="https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#getParentProfileInstance(android.content.ComponentName)">DevicePolicyManager.getParentProfileInstance()</a></code> 文档中。）例如，<code><a href="https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#lockNow()">DevicePolicyManager.lockNow()</a></code> 只锁定托管配置文件，而不是锁定整个设备。对于上述每个方法，您可以通过对 <code><a href="https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html">DevicePolicyManager</a></code> 的父实例调用该方法来获取以前的行为；您可以通过调用 <code><a href="https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#getParentProfileInstance(android.content.ComponentName)">DevicePolicyManager.getParentProfileInstance()</a></code> 获取此父项。例如，如果您调用父实例的 <code><a href="https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#lockNow()">lockNow()</a></code> 方法，则整个设备将被锁定。
  </li>

</ul>

<p>
  如需了解有关 Android 7.0 中针对 Android for Work 所做变更的详细信息，请参阅 <a href="https://developer.android.com/preview/features/afw.html">Android for Work 更新</a>。
</p>

<h2 id="annotations" style="padding-bottom: 0px;">注解保留</h2><hr>

<p>
Android 7.0 修复了一个注解可见性被忽略的错误。这种问题会导致应用可在运行时访问原本不允许访问的注解。这些注解包括：
</p>

<ul>
   <li><code>VISIBILITY_BUILD</code>：仅应编译时可见。</li>
   <li><code>VISIBILITY_SYSTEM</code>：运行时应可见，但仅限底层系统。</li>
</ul>

<p>
如果您的应用依赖这种行为，请为运行时必须可用的注解添加保留政策。您可通过使用 <code>@Retention(RetentionPolicy.RUNTIME)</code> 来执行此操作。
</p>

<h2 id="other" style="padding-bottom: 0px;">其他重要说明</h2><hr>

<ul>
<li>如果一个应用在 Android 7.0 上运行，但却是针对更低 API 级别开发的，那么在用户更改显示尺寸时，系统将终止此应用进程。应用必须能够妥善处理此情景。否则，当用户从最近使用记录中恢复运行应用时，应用将会出现崩溃现象。 <p>
您应测试应用以确保不会发生此行为。要进行此测试，您可以通过 DDMS 手动终止应用，以造成相同的崩溃现象。
</p>

<p>
在密度发生更改时，系统不会自动终止面向 N 及更高版本的应用；不过，这些应用仍可能对配置变更做出不良响应。
</p>
</li>

<li>
Android 7.0 上的应用应能够妥善处理配置变更，并且在后续启动时不会出现崩溃现象。您可以通过更改字体大小 (<strong>Setting</strong> &gt;<strong>Display</strong> &gt; <strong>Font size</strong>) 并随后从最近使用记录中恢复运行应用，来验证应用行为。
</li>

<li>
由于之前的 Android 版本中的一项错误，系统未能将对主线程上的一个 TCP 套接字的写入操作举报为违反严格模式。Android 7.0 修复了此错误。呈现出这种行为的应用现在会引发 <code>android.os.NetworkOnMainThreadException</code>。一般情况下，我们不建议在主线程上执行网络操作，因为这些操作通常会出现可能导致 ANR 和卡顿的高尾延迟。
</li>

<li>
<code>Debug.startMethodTracing()</code> 方法系列现在默认在您的共享存储空间上的软件包特定目录中存储输出，而非 SD 卡根目录。这意味着应用不再需要请求 <code>WRITE_EXTERNAL_STORAGE</code> 权限来使用这些 API 。
</li>

<li>
许多平台 API 现在开始检查在 <code><a href="https://developer.android.com/reference/android/os/Binder.html">Binder</a></code> 事务间发送的大负载，系统现在会将 <code>TransactionTooLargeExceptions</code> 作为 <code>RuntimeExceptions</code> 再次引发，而不再只是默默记录或抑制它们。一个常见例子是在 <code><a href="https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)">Activity.onSaveInstanceState()</a></code> 上存储过多数据，导致 <code>ActivityThread.StopInfo</code> 在您的应用面向 Android 7.0 时引发 <code>RuntimeException</code>。
</li>

<li>
如果应用向 <code><a href="https://developer.android.com/reference/android/view/View.html">View</a></code> 发布 <code><a href="https://developer.android.com/reference/java/lang/Runnable.html">Runnable</a></code> 任务，并且 <code><a href="https://developer.android.com/reference/android/view/View.html">View</a></code> 未附加到窗口，系统会用 <code><a href="https://developer.android.com/reference/android/view/View.html">View</a></code> 为 <code><a href="https://developer.android.com/reference/java/lang/Runnable.html">Runnable</a></code> 任务排队；在 <code><a href="https://developer.android.com/reference/android/view/View.html">View</a></code> 附加到窗口之前，不会执行 <code><a href="https://developer.android.com/reference/java/lang/Runnable.html">Runnable</a></code> 任务。此行为会修复以下错误： <ul>
   <li>如果一项应用是从并非预期窗口 UI 线程的其他线程发布到 <code><a href="https://developer.android.com/reference/android/view/View.html">View</a></code>，则 <code><a href="https://developer.android.com/reference/java/lang/Runnable.html">Runnable</a></code> 可能会因此运行错误的线程。
   </li>
   <li>如果 <code><a href="https://developer.android.com/reference/java/lang/Runnable.html">Runnable</a></code> 任务是从并非环路线程的其他线程发布，则应用可能会曝光 <code><a href="https://developer.android.com/reference/java/lang/Runnable.html">Runnable</a></code> 任务。</li>
</ul>
</li>

<li>
如果 Android 7.0 上一项有 <code><a href="https://developer.android.com/reference/android/Manifest.permission.html#DELETE_PACKAGES">DELETE_PACKAGES</a></code> 权限的应用尝试删除一个软件包，但另一项应用已经安装了这个软件包，则系统需要用户进行确认。在这种情况下，应用在调用 <code><a href="https://developer.android.com/reference/android/content/pm/PackageInstaller.html#uninstall(android.content.pm.VersionedPackage, android.content.IntentSender)">PackageInstaller.uninstall()</a></code> 时预计的返回状态应为 <code><a href="https://developer.android.com/reference/android/content/pm/PackageInstaller.html#STATUS_PENDING_USER_ACTION">STATUS_PENDING_USER_ACTION</a></code>。
</li>

  <li>名为 <em>Crypto</em> 的 JCA 提供程序已弃用，因为它仅有的 SHA1PRNG 算法为弱加密。应用无法再使用 SHA1PRNG（不安全地）派生密钥，因为不再提供此提供程序。如需了解详细信息，请参阅博文 <a href="http://android-developers.blogspot.com/2016/06/security-crypto-provider-deprecated-in.html" class="external-link">Android N 中已弃用“Crypto”安全提供程序</a>。
  </li>

</ul>




    </div>

    

  
    
  
    




  


<footer class="devsite-footer-promos nocontent">
  <nav class="devsite-full-site-width">
    <ul class="devsite-footer-promos-list">
      
      <li class="devsite-footer-promo">
        <a href="https://twitter.com/AndroidDev" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Twitter Promo">
          
          
          <img class="devsite-footer-promo-icon" src="./ndk_dlopen_files/logo-twitter.svg">
          
          
            Twitter
          
        </a>
        <div class="devsite-footer-promo-description">Follow @AndroidDev on Twitter</div>
      </li>
      
      <li class="devsite-footer-promo">
        <a href="https://plus.google.com/+AndroidDevelopers" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google+ Promo">
          
          
          <img class="devsite-footer-promo-icon" src="./ndk_dlopen_files/google_plus_48dp.png">
          
          
            Google+
          
        </a>
        <div class="devsite-footer-promo-description">Follow Android Developers on Google+</div>
      </li>
      
      <li class="devsite-footer-promo">
        <a href="https://www.youtube.com/user/androiddevelopers" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer YouTube Promo">
          
          
          <img class="devsite-footer-promo-icon" src="./ndk_dlopen_files/youtube_48dp.png">
          
          
            YouTube
          
        </a>
        <div class="devsite-footer-promo-description">Check out Android Developers on YouTube</div>
      </li>
      
    </ul>
  </nav>
</footer>



<div class="wrap dac-footer-container">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of1">
        <div class="dac-footer-contact">
          
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html" title="Newsletter">Newsletter</a>
          
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="博客" target="_blank">博客</a>
          
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html" title="支持">支持</a>
          
          <a class="dac-footer-contact-link" href="https://docs.google.com/forms/d/e/1FAIpQLSf27XIxoFmNpTjTYdk-m1uKWGqEnd7_4C_E1AD5fdCfyTBWNA/viewform?usp=pp_url&amp;entry.1909689089&amp;entry.208743710&amp;entry.408796755&amp;entry.1341430893&amp;entry.594931249&amp;entry.1640656812&amp;entry.1759804042&amp;entry.1441312344=developer.android.com" title="Join user studies" target="_blank">Join user studies</a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator">
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      
      <a href="https://developer.android.com/" title="Android Developers">Android Developers</a>
      
      <a href="https://developer.android.com/studio/index.html" title="Android Studio">Android Studio</a>
      
      <a href="https://developer.android.com/distribute/console/index.html" title="Google Play Console">Google Play Console</a>
      
      <a href="https://developer.android.com/legal.html" title="Legal Notice">Legal Notice</a>
    </p>

    
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="19R5dr2CDfYq2zik_y-GxPkZ8M_GqXOMOTljqKCCQrg6MTUxMTEwOTMwNDE0NTIxMA">
      <input type="hidden" name="next" value="/about/versions/nougat/android-7.0-changes.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id">
            Bahasa Indonesia
          </option>
          
          <option value="de">
            Deutsch
          </option>
          
          <option value="en" selected="selected">
            English
          </option>
          
          <option value="es">
            español
          </option>
          
          <option value="es-419">
            Español (América Latina)
          </option>
          
          <option value="fr">
            français
          </option>
          
          <option value="pt-br">
            Português Brasileiro
          </option>
          
          <option value="vi">
            Tiếng Việt
          </option>
          
          <option value="tr">
            Türkçe
          </option>
          
          <option value="ru">
            Русский
          </option>
          
          <option value="th">
            ภาษาไทย
          </option>
          
          <option value="ja">
            日本語
          </option>
          
          <option value="zh-cn" selected="selected">
            简体中文
          </option>
          
          <option value="zh-tw">
            繁體中文
          </option>
          
          <option value="ko">
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast="">
    <div class="dac-toast-wrap">
      
      This site uses cookies to store your preferences for site-specific language and display options.
      <button class="dac-toast-close-btn">
        
        <span class="dac-button dac-raised dac-primary">OK</span>
      </button>
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb="" data-swap="" class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle=""></button>
        </div>
        <div class="dac-swap" data-swap-container="">
          <section class="dac-swap-section dac-active dac-down">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container="">
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required="">
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email address</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required="">
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected="">English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required="" value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required="" value="I acknowledge that the information provided in this form will be subject to Google&#39;s privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html="">I acknowledge that the information provided in this form will be subject to Google's <a href="https://www.google.com/policies/privacy/" target="_blank">privacy policy</a>.</span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">You have successfully signed up for the latest Android developer news and tips.</p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->

<div data-modal="wechat" class="dac-modal">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle=""></button>
        </div>
        <section>
          
          <h2 class="norule dac-modal-header-title">Follow Google Developers on WeChat</h2>
        </section>
      </header>
      <section class="dac-modal-content figure-center center-img">
        <img src="./ndk_dlopen_files/qr-wechat.png">
      </section>
    </div>
  </div>
</div><!--/.dac-modal[dac-modal=wechat]-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle=""></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            
            Browse this site in <span class="span-target-lang">English</span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    
                    You requested a page in <span class="span-target-lang">English</span>, but your language preference for this site is <span class="span-current-lang">English</span>.
                  </p>
                  <p id="resetLangCta">
                    
                    Would you like to change your language preference and browse this site in <span class="span-target-lang">English</span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle="">Change Language</button>
            </a>
            <a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle="">Not Now</button>
            </a>
          </footer>
        
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle=""></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok" data-modal-toggle="">
                
                OK, make this page visible
              </button>
            </a>
          </footer>
        
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="./ndk_dlopen_files/ytblogger_lists_unified.js" defer=""></script>
  <script src="./ndk_dlopen_files/android_metadata_en.js" defer=""></script>
  
  <script src="./ndk_dlopen_files/lists.js" defer=""></script>
  <script src="./ndk_dlopen_files/gms_lists.js" defer=""></script>
  <script src="./ndk_dlopen_files/lists(1).js" defer=""></script>
  <script src="./ndk_dlopen_files/lists(2).js" defer=""></script>
  <script src="./ndk_dlopen_files/lists(3).js" defer=""></script>
  <script src="./ndk_dlopen_files/lists(4).js" defer=""></script>
  <script src="./ndk_dlopen_files/saved_resource"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_zh-cn.js?v=2017111904" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
      devsite.navigatingRadio.init();
      devsite.kennedy.InitializeTabbars();
      // overflowMenu must be initialized after tabbar.
      devsite.overflowMenu.init();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a short survey?
    </div>
    <div class="material-dialog-description">
      Help us improve the Android developer experience.
      <br>(Sep 2017 survey)
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank" href="https://goo.gl/dNPzCR">Okay</a>
      <a class="dac-button" href="https://developer.android.com/about/versions/nougat/android-7.0-changes.html#">No thanks</a>
    </div>
  </div>
</div>



<table cellspacing="0" cellpadding="0" class="gstl_50 gssb_c" style="width: 2px; display: none; top: 3px; position: absolute; left: -1px;"><tbody><tr><td class="gssb_f"></td><td class="gssb_e" style="width: 100%;"></td></tr></tbody></table></body></html>